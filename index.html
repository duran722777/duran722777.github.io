<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>ì˜¤ëŠ˜ì˜ í–‰ë³µ ë¬¸êµ¬ + ë¯¸ë‹ˆê²Œì„ (FULL)</title>
<style>
  :root {
    --pink-1:#ffe5f0; --pink-2:#fff0f5; --night-1:#2c003e; --night-2:#4b0082;
  }
  body{
    font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, 'Apple SD Gothic Neo', 'Noto Sans KR', sans-serif;
    margin:0; padding:0; text-align:center; overflow-x:hidden; transition:background 1s;
    background: linear-gradient(to bottom, var(--pink-1), var(--pink-2));
  }
  .container{ padding:48px 20px 20px; max-width:960px; margin:0 auto; }
  h1{ margin:0 0 8px; }
  .categories{ display:flex; gap:8px; justify-content:center; flex-wrap:wrap; margin:14px 0 18px; }
  .category-btn{
    padding:12px 18px; border:none; border-radius:22px; cursor:pointer; background:#ffd1dc; color:#fff; font-weight:700;
    box-shadow:0 2px 8px rgba(255,153,200,.3);
  }
  .category-btn.active{ background:#ff99c8; }
  #clickHint{ margin:6px 0 10px; }
  .cookie{ width:min(22vw,140px); max-width:140px; cursor:pointer; transition:transform .15s; position:relative; touch-action:manipulation; }
  .cookie:hover{ transform:scale(1.06); }
  .message-box{ margin-top:14px; min-height:88px; font-size:20px; font-weight:800; color:#111; white-space:pre-wrap; line-height:1.5; }
  .game-mode{ margin:20px 0 8px; display:flex; gap:8px; justify-content:center; flex-wrap:wrap; }
  .game-btn{
    padding:12px 18px; border:none; border-radius:16px; cursor:pointer; background:#ffb6c1; color:#fff; font-weight:800;
    min-width:160px; box-shadow:0 2px 10px rgba(255,182,193,.35);
  }
  #scoreBox, #highScoreBox, #timeBox{
    display:inline-block; margin:8px 6px 0; font-size:18px; font-weight:700; transition:transform .2s;
    padding:6px 10px; border-radius:10px; background:rgba(255,255,255,.6);
  }

  /* ê³µìœ  ë²„íŠ¼ ì˜ì—­ */
  .share-wrap{ display:flex; gap:8px; justify-content:center; flex-wrap:wrap; margin:16px 0 22px; }
  .share-btn{
    padding:10px 14px; border:none; border-radius:12px; cursor:pointer; background:#ff99c8; color:#fff; font-weight:800;
    box-shadow:0 2px 10px rgba(255,153,200,.35); min-width:160px;
  }

  /* ì´í™íŠ¸ */
  .glitter, .firework, .star, .congrats, .score-popup, .bonus-msg { position:absolute; pointer-events:none; }
  .glitter{ width:10px; height:10px; background: radial-gradient(circle, #fff 0%, #ffb6c1 80%); border-radius:50%; opacity:.85; }
  .firework{ width:6px; height:6px; border-radius:50%; opacity:1; }
  .score-popup{ color:#ff69b4; font-weight:900; font-size:18px; text-shadow:0 1px 0 #fff; transition: transform .8s, opacity .8s; }
  .bonus-msg{ background:#ff69b4; color:#fff; padding:6px 10px; border-radius:12px; font-weight:800; animation: bonusAnim 2s forwards; }
  @keyframes bonusAnim{ 0%{ opacity:1; transform:translateY(0) scale(1);} 100%{ opacity:0; transform:translateY(-60px) scale(1.4);} }

  .star{ width:4px; height:4px; background:#fff; border-radius:50%; opacity:.8; animation: starfall linear infinite; }
  @keyframes starfall{ 0%{ transform:translateY(-10px); opacity:0;} 45%{opacity:1;} 100%{ transform:translateY(100vh); opacity:0;} }

  .congrats{ font-size:26px; font-weight:900; color:#ff1493; text-shadow:0 2px 0 #fff; animation:bounce 1s ease forwards; }
  @keyframes bounce{ 0%{ transform:translateY(-50px); opacity:0;} 50%{ transform:translateY(0); opacity:1;} 100%{ transform:translateY(-14px);} }

  /* ì‘ì€ ìºë¦­í„° */
  .small-char{ position:absolute; width:56px; cursor:pointer; transition:transform .25s; filter: drop-shadow(0 4px 10px rgba(0,0,0,.2)); }
  .small-char:hover{ transform:scale(1.12) rotate(-4deg); }

  /* ëª¨ë°”ì¼ ìµœì í™” */
  @media (max-width:480px){
    .cookie{ width:34vw; max-width:150px; }
    .category-btn, .game-btn, .share-btn{ min-width:48%; padding:12px 12px; border-radius:16px; }
    #scoreBox, #highScoreBox, #timeBox{ font-size:16px; }
  }
</style>
</head>
<body>

  <div class="container">
    <h1>ì˜¤ëŠ˜ì˜ í–‰ë³µ ë¬¸êµ¬</h1>

    <div class="categories">
      <button class="category-btn active" data-category="í–‰ìš´">ğŸ€ í–‰ìš´</button>
      <button class="category-btn" data-category="ì¬ë¬¼">ğŸ’° ì¬ë¬¼</button>
      <button class="category-btn" data-category="ì‚¬ë‘">â¤ï¸ ì‚¬ë‘</button>
      <button class="category-btn" data-category="ê±´ê°•">ğŸ¥ ê±´ê°•</button>
    </div>

    <p id="clickHint">í”¼ì¹´ì¸„ë¥¼ í´ë¦­í•˜ì„¸ìš”! ğŸ­</p>
    <img id="cookie" class="cookie" src="https://cdn-icons-png.flaticon.com/512/188/188987.png" alt="ì¿ í‚¤" />
    <div id="messageBox" class="message-box"></div>

    <div class="game-mode">
      <button class="game-btn" id="clickGameBtn">ì¿ í‚¤ í´ë¦­ ê²Œì„</button>
      <button class="game-btn" id="moveGameBtn">ì›€ì§ì´ëŠ” ì¿ í‚¤ ì¡ê¸°</button>
    </div>
    <div>
      <span id="scoreBox">ì ìˆ˜: 0</span>
      <span id="highScoreBox">ìµœê³  ì ìˆ˜: 0</span>
      <span id="timeBox"></span>
    </div>

    <div class="share-wrap">
      <button class="share-btn" id="shareTextBtn">ë¬¸êµ¬ ê³µìœ í•˜ê¸° (íŠ¸ìœ„í„°)</button>
      <button class="share-btn" id="shareScoreTwitterBtn">íŠ¸ìœ„í„°ë¡œ ì ìˆ˜ ê³µìœ </button>
      <button class="share-btn" id="shareScoreKakaoBtn">ì¹´í†¡/ê³µìœ ë¡œ ì ìˆ˜ ê³µìœ </button>
    </div>
  </div>

  <!-- ë°°ê²½ ìŒì•… & íš¨ê³¼ìŒ -->
  <audio id="bgMusic" src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" loop></audio>
  <audio id="clickSound" src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_7c9bff79b4.mp3?filename=click-124467.mp3"></audio>
  <audio id="bonusSound" src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_6dcd44f79f.mp3?filename=collect-134763.mp3"></audio>
  <audio id="endSound" src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_c67ab50b1e.mp3?filename=success-1-6297.mp3"></audio>

<script>
/* ===================== ì „ì—­ ìš”ì†Œ/ìƒíƒœ ===================== */
const cookie = document.getElementById('cookie');
const messageBox = document.getElementById('messageBox');
const clickHint = document.getElementById('clickHint');
const scoreBox = document.getElementById('scoreBox');
const highScoreBox = document.getElementById('highScoreBox');
const timeBox = document.getElementById('timeBox');

const shareTextBtn = document.getElementById('shareTextBtn');
const shareScoreTwitterBtn = document.getElementById('shareScoreTwitterBtn');
const shareScoreKakaoBtn = document.getElementById('shareScoreKakaoBtn');

const bgMusic = document.getElementById('bgMusic');
const clickSound = document.getElementById('clickSound');
const bonusSound = document.getElementById('bonusSound');
const endSound = document.getElementById('endSound');

let selectedCategory = 'í–‰ìš´';
let typingInterval = null;
let typingLock = false;
let currentGame = null;
let lastScore = 0;
let lastGame = '';

/* ===================== ì‹œê°„ëŒ€ í…Œë§ˆ ===================== */
function updateBackground(){
  const h = new Date().getHours();
  if(h >= 6 && h < 18){
    document.body.style.background = 'linear-gradient(to bottom, var(--pink-1), var(--pink-2))';
  } else {
    document.body.style.background = 'linear-gradient(to bottom, var(--night-1), var(--night-2))';
  }
}
updateBackground();

/* ===================== ì¹´í…Œê³ ë¦¬ ===================== */
const categories = {
  'í–‰ìš´': ["ì˜¤ëŠ˜ ë‹¹ì‹ ì€ ì‘ì€ ê¸°ì¨ì„ ë°œê²¬í•  ê²ƒì…ë‹ˆë‹¤.","ì˜¤ëŠ˜ì˜ ì›ƒìŒì´ ë‚´ì¼ì˜ í–‰ìš´ì„ ë¶€ë¦…ë‹ˆë‹¤","ëœ»ë°–ì˜ ì¢‹ì€ ì¼ì´ ìƒê¸¸ ìˆ˜ ìˆì–´ìš”","ì‘ì€ ì„±ì·¨ê°€ í° ë§Œì¡±ìœ¼ë¡œ ì´ì–´ì§‘ë‹ˆë‹¤","ê¸°ë¶„ ì¢‹ì€ ì†Œì‹ì´ ì°¾ì•„ì˜µë‹ˆë‹¤"],
  'ì¬ë¬¼': ["ë§ˆìŒì† í’ìš”ê°€ ì˜¤ëŠ˜ í•˜ë£¨ë¥¼ ë°ê²Œ í•©ë‹ˆë‹¤","ì‘ì€ ê°ì‚¬ê°€ í° í–‰ë³µìœ¼ë¡œ ëŒì•„ì˜µë‹ˆë‹¤","ì§€í˜œë¡œìš´ ì„ íƒì´ ì¬ë¬¼ì„ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤","ì˜¤ëŠ˜ì€ ê¸ˆì „ì  í–‰ìš´ì´ ë”°ë¥¼ ìˆ˜ ìˆì–´ìš”","ì•Œëœ°í•œ ê³„íšì´ í° ì´ìµìœ¼ë¡œ ì´ì–´ì§‘ë‹ˆë‹¤"],
  'ì‚¬ë‘': ["ë”°ëœ»í•œ ë§Œë‚¨ì´ ì˜ˆìƒë©ë‹ˆë‹¤","ì˜¤ëŠ˜ì€ ì‚¬ë‘ì´ ì¶©ë§Œí•©ë‹ˆë‹¤","ì§„ì‹¬ ì–´ë¦° ëŒ€í™”ê°€ ê°€ê¹Œì›€ì„ ë§Œë“­ë‹ˆë‹¤","ì‘ì€ ì¹œì ˆì´ ì‚¬ë‘ì„ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤","ì„¤ë ˜ ê°€ë“í•œ í•˜ë£¨ê°€ ë  ê±°ì˜ˆìš”"],
  'ê±´ê°•': ["ëª¸ê³¼ ë§ˆìŒì´ í¸ì•ˆí•œ í•˜ë£¨ê°€ ë¼ìš”","ì˜¤ëŠ˜ì€ ê¸°ë¶„ ì¢‹ì€ ìš´ë™ì´ í–‰ìš´ì„ ë¶€ë¦…ë‹ˆë‹¤","ê±´ê°•í•œ ìŠµê´€ì´ ì—ë„ˆì§€ë¥¼ ì¤ë‹ˆë‹¤","ì¶©ë¶„í•œ íœ´ì‹ì´ í™œë ¥ì„ ì¤ë‹ˆë‹¤","ë§ˆìŒì±™ê¹€ì´ ìŠ¤íŠ¸ë ˆìŠ¤ë¥¼ ì¤„ì—¬ì¤ë‹ˆë‹¤"]
};

document.querySelectorAll('.category-btn').forEach(btn=>{
  btn.addEventListener('click',()=>{
    document.querySelectorAll('.category-btn').forEach(b=>b.classList.remove('active'));
    btn.classList.add('active');
    selectedCategory = btn.dataset.category;
  },{passive:true});
});

/* ===================== ë³„ë˜¥ë³„ ë°°ê²½ ===================== */
function createStar(){
  const star = document.createElement('div');
  star.className = 'star';
  star.style.left = Math.random()*window.innerWidth + 'px';
  star.style.animationDuration = (2 + Math.random()*3) + 's';
  document.body.appendChild(star);
  setTimeout(()=>star.remove(), 5200);
}
setInterval(createStar, 600);

/* ===================== í…ìŠ¤íŠ¸ íƒ€ì´í•‘ ===================== */
function typeMessage(message){
  if(typingInterval) clearInterval(typingInterval);
  typingLock = true;
  messageBox.textContent = '';
  let i = 0;
  typingInterval = setInterval(()=>{
    if(i < message.length){
      messageBox.textContent += message[i];
      i++;
    } else {
      clearInterval(typingInterval);
      typingInterval = null;
      typingLock = false;
    }
  }, 26);
}

/* ===================== ì´í™íŠ¸: ê¸€ë¦¬í„°/í­ì£½/íŒì—… ===================== */
function createGlitter(x,y,count=12){
  for(let i=0;i<count;i++){
    const g = document.createElement('div');
    g.className = 'glitter';
    g.style.left = x + 'px';
    g.style.top = y + 'px';
    g.style.background = `radial-gradient(circle, #fff 0%, hsl(${Math.random()*360},70%,80%) 80%)`;
    const angle = Math.random()*2*Math.PI;
    const r = 20 + Math.random()*40;
    g.style.transition = 'transform 1.2s, opacity 1.2s';
    g.style.transform = 'translate(0,0)';
    g.style.opacity = '1';
    document.body.appendChild(g);
    requestAnimationFrame(()=>{
      g.style.transform = `translate(${r*Math.cos(angle)}px, ${r*Math.sin(angle)}px)`;
      g.style.opacity = '0';
    });
    setTimeout(()=>g.remove(), 1300);
  }
}

function createFireworks(x,y,particles=26){
  for(let i=0;i<particles;i++){
    const f = document.createElement('div');
    f.className = 'firework';
    f.style.left = x + 'px';
    f.style.top = y + 'px';
    f.style.background = `hsl(${Math.random()*360},100%,75%)`;
    f.style.borderRadius = '50%';
    const angle = Math.random()*2*Math.PI;
    const r = 40 + Math.random()*80;
    f.style.transition = 'transform .85s ease-out, opacity .85s ease-out';
    f.style.transform = 'translate(0,0)';
    f.style.opacity = '1';
    document.body.appendChild(f);
    requestAnimationFrame(()=>{
      f.style.transform = `translate(${r*Math.cos(angle)}px, ${r*Math.sin(angle)}px)`;
      f.style.opacity = '0';
    });
    setTimeout(()=>f.remove(), 900);
  }
  createGlitter(x,y,12);
}

function popupScore(x,y,text){
  const pop = document.createElement('div');
  pop.className = 'score-popup';
  pop.textContent = text;
  pop.style.left = x + 'px';
  pop.style.top = y + 'px';
  const angle = Math.random()*Math.PI*2;
  const r = 30 + Math.random()*40;
  pop.style.transform = 'translate(0,0)';
  pop.style.opacity = '1';
  document.body.appendChild(pop);
  requestAnimationFrame(()=>{
    pop.style.transform = `translate(${r*Math.cos(angle)}px, ${r*Math.sin(angle)}px)`;
    pop.style.opacity = '0';
  });
  setTimeout(()=>pop.remove(), 900);
}

/* ===================== ì ìˆ˜/í•˜ì´ìŠ¤ì½”ì–´/ì• ë‹ˆë©”ì´ì…˜ ===================== */
function animateScore(score, el){
  el.style.transform = 'scale(1.5)';
  el.textContent = `ì ìˆ˜: ${score}`;
  try { clickSound.currentTime = 0; clickSound.play(); } catch(e){}
  setTimeout(()=> el.style.transform = 'scale(1)', 180);
}

function showCongrats(){
  const c = document.createElement('div');
  c.className = 'congrats';
  c.textContent = 'ğŸ‰ ì‹ ê¸°ë¡ ë‹¬ì„±! ğŸ‰';
  c.style.left = '50%';
  c.style.top = (window.scrollY + 110) + 'px';
  c.style.transform = 'translateX(-50%)';
  document.body.appendChild(c);
  setTimeout(()=>c.remove(), 2000);
}

function updateHighScore(gameType, score){
  const key = `highscore_${gameType}`;
  const prev = parseInt(localStorage.getItem(key)) || 0;
  if(score > prev){
    localStorage.setItem(key, score);
    showCongrats();
  }
  const finalHigh = Math.max(score, prev);
  highScoreBox.textContent = `ìµœê³  ì ìˆ˜: ${finalHigh}`;
  return finalHigh;
}

/* ===================== ì¿ í‚¤ ê¸°ë³¸ í´ë¦­ (ë©”ì‹œì§€) ===================== */
cookie.addEventListener('click', (e)=>{
  if(typingLock || currentGame) return;
  clickHint.style.display = 'none';
  const msgs = categories[selectedCategory];
  let msg = msgs[Math.floor(Math.random()*msgs.length)];

  // 10% í™•ë¥  ë³´ë„ˆìŠ¤ ë©”ì‹œì§€
  if(Math.random() < 0.10){
    msg = 'âœ¨ íŠ¹ë³„í•œ í–‰ìš´ì´ ì°¾ì•„ì˜µë‹ˆë‹¤! âœ¨';
    const bonus = document.createElement('div');
    bonus.className = 'bonus-msg';
    bonus.style.left = e.clientX + 'px';
    bonus.style.top = e.clientY + 'px';
    bonus.textContent = msg;
    document.body.appendChild(bonus);
    setTimeout(()=>bonus.remove(), 2000);
    try { bonusSound.currentTime = 0; bonusSound.play(); } catch(err){}
  }

  typeMessage(msg);
  const rect = cookie.getBoundingClientRect();
  const cx = rect.left + rect.width/2;
  const cy = rect.top + rect.height/2 + window.scrollY;
  createFireworks(cx, cy, 18);
});

/* ===================== ì‘ì€ ìºë¦­í„° ëœë¤ ë“±ì¥ ===================== */
function spawnSmallChar(){
  if(Math.random() < 0.028 && !currentGame){
    const char = document.createElement('img');
    char.src = 'https://cdn-icons-png.flaticon.com/512/616/616408.png';
    char.className = 'small-char';
    char.style.left = Math.random()*(window.innerWidth - 56) + 'px';
    char.style.top = (window.scrollY + 50 + Math.random()*(window.innerHeight - 120)) + 'px';
    document.body.appendChild(char);
    char.addEventListener('click', ()=>{
      const r = char.getBoundingClientRect();
      const x = r.left + 28, y = r.top + 28 + window.scrollY;
      createFireworks(x, y, 26);
      popupScore(x, y, '+5');
      try { bonusSound.currentTime = 0; bonusSound.play(); } catch(e){}
      typeMessage('ì‘ì€ ì¹œêµ¬ê°€ íŠ¹ë³„í•œ ì„ ë¬¼ì„ ì¤¬ì–´ìš”! ğŸŒŸ');
      char.remove();
    }, {passive:true});
    setTimeout(()=>{ if(char.parentNode) char.remove(); }, 5200);
  }
}
setInterval(spawnSmallChar, 1000);

/* ===================== ê²Œì„ ë¡œì§ ===================== */
function resetCookie(){
  cookie.style.position='relative';
  cookie.style.left='0px';
  cookie.style.top='0px';
}

document.getElementById('clickGameBtn').addEventListener('click', ()=>{
  resetCookie();
  currentGame = 'clickGame';
  let score = 0;
  lastGame = 'í´ë¦­ ê²Œì„';
  scoreBox.textContent = `ì ìˆ˜: ${score}`;
  highScoreBox.textContent = `ìµœê³  ì ìˆ˜: ${parseInt(localStorage.getItem('highscore_clickGame'))||0}`;
  timeBox.textContent = '';
  clickHint.textContent = '10ì´ˆ ì•ˆì— ì¿ í‚¤ë¥¼ ë§ì´ í´ë¦­í•˜ì„¸ìš”!';
  clickHint.style.display = 'block';
  cookie.style.position = 'relative';

  const handler = ()=>{
    score++;
    lastScore = score;
    animateScore(score, scoreBox);
    const r = cookie.getBoundingClientRect();
    createFireworks(r.left + r.width/2, r.top + r.height/2 + window.scrollY, 22);
  };
  cookie.addEventListener('click', handler);

  let left = 10;
  timeBox.textContent = `ë‚¨ì€ ì‹œê°„: ${left}s`;
  const timer = setInterval(()=>{
    left--;
    timeBox.textContent = `ë‚¨ì€ ì‹œê°„: ${left}s`;
  }, 1000);

  setTimeout(()=>{
    clearInterval(timer);
    cookie.removeEventListener('click', handler);
    clickHint.textContent = `ê²Œì„ ì¢…ë£Œ! ìµœì¢… ì ìˆ˜: ${score}`;
    updateHighScore('clickGame', score);
    try { endSound.currentTime = 0; endSound.play(); } catch(e){}
    currentGame = null;
    timeBox.textContent = '';
  }, 10000);
}, {passive:true});

document.getElementById('moveGameBtn').addEventListener('click', ()=>{
  resetCookie();
  currentGame = 'moveGame';
  let score = 0;
  lastGame = 'ì›€ì§ì´ëŠ” ì¿ í‚¤';
  scoreBox.textContent = `ì ìˆ˜: ${score}`;
  highScoreBox.textContent = `ìµœê³  ì ìˆ˜: ${parseInt(localStorage.getItem('highscore_moveGame'))||0}`;
  timeBox.textContent = '';
  clickHint.textContent = 'ì›€ì§ì´ëŠ” ì¿ í‚¤ë¥¼ ì¡ìœ¼ì„¸ìš”!';
  clickHint.style.display = 'block';
  cookie.style.position = 'absolute';

  // ë‚œì´ë„ ì ì  ì¦ê°€
  let intervalMs = 480;
  const mover = setInterval(()=>{
    const x = Math.random()*(window.innerWidth - 110);
    const y = window.scrollY + 100 + Math.random()*(window.innerHeight - 220);
    cookie.style.left = `${x}px`;
    cookie.style.top  = `${y}px`;
    // ì ì  ë¹¨ë¼ì§€ê²Œ
    intervalMs = Math.max(160, intervalMs * 0.96);
  }, 400);

  const handler = ()=>{
    score++;
    lastScore = score;
    animateScore(score, scoreBox);
    const r = cookie.getBoundingClientRect();
    createFireworks(r.left + r.width/2, r.top + r.height/2 + window.scrollY, 22);
  };
  cookie.addEventListener('click', handler);

  let left = 15;
  timeBox.textContent = `ë‚¨ì€ ì‹œê°„: ${left}s`;
  const timer = setInterval(()=>{
    left--;
    timeBox.textContent = `ë‚¨ì€ ì‹œê°„: ${left}s`;
  }, 1000);

  setTimeout(()=>{
    clearInterval(mover);
    clearInterval(timer);
    cookie.removeEventListener('click', handler);
    clickHint.textContent = `ê²Œì„ ì¢…ë£Œ! ìµœì¢… ì ìˆ˜: ${score}`;
    updateHighScore('moveGame', score);
    try { endSound.currentTime = 0; endSound.play(); } catch(e){}
    currentGame = null;
    timeBox.textContent = '';
  }, 15000);
}, {passive:true});

/* ===================== ê³µìœ  ê¸°ëŠ¥ (ë¬¸êµ¬/ì ìˆ˜) ===================== */
// íŠ¸ìœ„í„°ë¡œ í˜„ì¬ ë¬¸êµ¬ ê³µìœ 
shareTextBtn.addEventListener('click', ()=>{
  const text = encodeURIComponent(messageBox.textContent || 'ì˜¤ëŠ˜ì˜ í–‰ë³µ ë¬¸êµ¬ âœ¨');
  const url  = encodeURIComponent(window.location.href);
  window.open(`https://twitter.com/intent/tweet?text=${text}&url=${url}`, '_blank');
}, {passive:true});

// íŠ¸ìœ„í„°ë¡œ ì ìˆ˜ ê³µìœ 
shareScoreTwitterBtn.addEventListener('click', ()=>{
  const text = encodeURIComponent(`ë‚´ ê¸°ë¡: ${lastGame} - ì ìˆ˜ ${lastScore}ì ! âœ¨`);
  const url  = encodeURIComponent(window.location.href);
  window.open(`https://twitter.com/intent/tweet?text=${text}&url=${url}`, '_blank');
}, {passive:true});

// ì¹´í†¡/ê³µìœ (ì›¹ì‰ì–´ API)ë¡œ ì ìˆ˜ ê³µìœ  (ëª¨ë°”ì¼ì—ì„œ ì¹´í†¡ í¬í•¨ ê³µìœ  ì‹œíŠ¸ê°€ ì—´ë¦¼)
shareScoreKakaoBtn.addEventListener('click', async ()=>{
  const shareText = `ë‚´ ê¸°ë¡: ${lastGame || 'ë¯¸ë‹ˆê²Œì„'} - ${lastScore}ì ! ğŸ®`;
  const shareData = {
    title: 'ì˜¤ëŠ˜ì˜ í–‰ë³µ ë¬¸êµ¬ + ë¯¸ë‹ˆê²Œì„',
    text: shareText,
    url: window.location.href
  };
  if(navigator.share){
    try{
      await navigator.share(shareData);
    }catch(e){
      // ì‚¬ìš©ìê°€ ì·¨ì†Œí–ˆê±°ë‚˜ ì‹¤íŒ¨: íŠ¸ìœ„í„°ë¡œ í´ë°±
      const text = encodeURIComponent(shareText);
      const url  = encodeURIComponent(window.location.href);
      window.open(`https://twitter.com/intent/tweet?text=${text}&url=${url}`, '_blank');
    }
  }else{
    // ë°ìŠ¤í¬í†± ë“±: í´ë¦½ë³´ë“œ ë³µì‚¬ í´ë°±
    try{
      await navigator.clipboard.writeText(`${shareText}\n${window.location.href}`);
      alert('ê³µìœ  í…ìŠ¤íŠ¸ë¥¼ í´ë¦½ë³´ë“œì— ë³µì‚¬í–ˆì–´ìš”. ì¹´ì¹´ì˜¤í†¡ì— ë¶™ì—¬ë„£ê¸° í•˜ì„¸ìš”!');
    }catch{
      const text = encodeURIComponent(shareText);
      const url  = encodeURIComponent(window.location.href);
      window.open(`https://twitter.com/intent/tweet?text=${text}&url=${url}`, '_blank');
    }
  }
}, {passive:true});

/* ===================== ë°°ê²½ ìŒì•… ìë™ì¬ìƒ ì²˜ë¦¬ ===================== */
(function initAudio(){
  // ëª¨ë°”ì¼ ìë™ì¬ìƒ ì œí•œ ëŒ€ë¹„: ì²« ì‚¬ìš©ì ìƒí˜¸ì‘ìš©ì—ì„œ ì¬ìƒ ì‹œë„
  const tryPlay = ()=>{ bgMusic.volume = 0.18; bgMusic.play().catch(()=>{}); document.removeEventListener('pointerdown', tryPlay); };
  document.addEventListener('pointerdown', tryPlay, {once:true, passive:true});
  // ë°ìŠ¤í¬í†±ì€ ì¦‰ì‹œ ì¬ìƒ ì‹œë„
  bgMusic.volume = 0.18;
  bgMusic.play().catch(()=>{ /* ìƒí˜¸ì‘ìš© ì´í›„ ì¬ìƒ */ });
})();
</script>
</body>
</html>
